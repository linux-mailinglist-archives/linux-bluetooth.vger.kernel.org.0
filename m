Return-Path: <linux-bluetooth-owner@vger.kernel.org>
X-Original-To: lists+linux-bluetooth@lfdr.de
Delivered-To: lists+linux-bluetooth@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id B022032D970
	for <lists+linux-bluetooth@lfdr.de>; Thu,  4 Mar 2021 19:28:16 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S234219AbhCDS1Y (ORCPT <rfc822;lists+linux-bluetooth@lfdr.de>);
        Thu, 4 Mar 2021 13:27:24 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:57382 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S234205AbhCDS07 (ORCPT
        <rfc822;linux-bluetooth@vger.kernel.org>);
        Thu, 4 Mar 2021 13:26:59 -0500
Received: from mail-ot1-x332.google.com (mail-ot1-x332.google.com [IPv6:2607:f8b0:4864:20::332])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 3C2D3C061574
        for <linux-bluetooth@vger.kernel.org>; Thu,  4 Mar 2021 10:26:19 -0800 (PST)
Received: by mail-ot1-x332.google.com with SMTP id f33so28157353otf.11
        for <linux-bluetooth@vger.kernel.org>; Thu, 04 Mar 2021 10:26:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pi-supply-com.20150623.gappssmtp.com; s=20150623;
        h=mime-version:from:date:message-id:subject:to;
        bh=Ut+OJIeYwS7bibIZXl4bil+QMeWrKldJe3nKpsr3rg4=;
        b=WHyMVXFIDcJQ2TKvUGB05D3VDlqP9JEgG3G51HWe+bKfC8mjmBYCPpElYbHJynoihi
         epH00TRH8P5XFtCPugSxBrv6lP0e5W5HmCJLxHI6/vIkXADGNC+s7WgXQwhhTcOu58DJ
         6ckjONzBCZVQV19R1YbliT/yyfJ3E6n4I3qK6FmQ0FnQpgO+9CydsGyNHtbgLVYJBQ2x
         vq40sLFZ9OkbsRl9pTWGCA51c4DHWr1ICYUDkqsXr7e+xILG02QYcCJnDQNPxZGDMtxs
         IF1jS1rV3CbAmfQe5BYmKAxOCMySwizHXqhBXR7p/sxdtBr/6ay9QlJjknLt6HGDXdsr
         OreA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:from:date:message-id:subject:to;
        bh=Ut+OJIeYwS7bibIZXl4bil+QMeWrKldJe3nKpsr3rg4=;
        b=hnQldwSqbUYbc5JKJjgkBU+33iQ5UA6gQTAtz0nXl3cw1jBRRbZEyWRzvNXLHHgDF1
         mJnX278gYZfOhDQSEp2zQ5NS4+x16Q8N5K2I0pqh9EhiZ4FIK9SPkv7KBB1OMuvmCQCW
         wbNiTWpXXBPbWYrGgXMjmUztQxVuveo/t+zneQRfREoRisjjw8qdooJv7jFYnBx8ZW0G
         iZyte644wJ5o8LB/6Zr5s4yaXtkX2iw2EPSorE6x3HryrP8k4pNk7+VcHPlqYCsI3Xi4
         qmFF4MfKcTgub2LsbnAH74tGUE8upzjoBTFHJQtOrH9dmUnZ6iSTVEWFw1TXzkUbPgYz
         NFDQ==
X-Gm-Message-State: AOAM532rWQM96BSEyAA0Ppi+pPbO6/fja2syhisIUsbI0vuUKtSA/bsv
        fKDk7tMFQ1hE9jpcW45aA7TqHzg2o5w7Q18X2Q6uS6HgCajk3g==
X-Google-Smtp-Source: ABdhPJyEIkZj0nFU3jw9Ov2FUIbyZKXej/oxxvnbfrOHiCpFCkl6PnZm70RuSOMzmod+cQHtedLoJmncbmdu2sr0IE0=
X-Received: by 2002:a9d:74cc:: with SMTP id a12mr2781975otl.135.1614882378446;
 Thu, 04 Mar 2021 10:26:18 -0800 (PST)
MIME-Version: 1.0
From:   Ryan Walmsley <ryan@pi-supply.com>
Date:   Thu, 4 Mar 2021 18:26:07 +0000
Message-ID: <CA+0z1OhRZcC0F8kq4HFduJTZqehfaUfNowQBjoR1-vCk6w9Kng@mail.gmail.com>
Subject: BlueZ Creates conflicting deviceinfo service.
To:     linux-bluetooth@vger.kernel.org
Content-Type: text/plain; charset="UTF-8"
Precedence: bulk
List-ID: <linux-bluetooth.vger.kernel.org>
X-Mailing-List: linux-bluetooth@vger.kernel.org

Hi,

We've been working on something that uses Bluetooth to provide GATT
services and recently have updated to BlueZ 5.55 from 5.53 and have
found an issue.

It seems that in the newer version a commit was made
(d5e07945c4aa36a83addc3c269f55c720c28afdb) that enabled the service
0x180A with characteristic 0x2A50.

However as our software creates a service on 0x180A it causes a
conflict, as the application we are making our software with reads
from the first service available which is the one generated by BlueZ.

It looks like it was discussed about a kill switch being added of
"DeviceIdOverLE" to then disable this but I can't find any reference
to this at all.

How would be best to disable this?

-- 
Ryan Walmsley

Engineer

Pi Supply Unit 4 Bells Yew Green Business Court,
Bells Yew Green, East Sussex, TN3 9BJ, United Kingdom
