Return-Path: <linux-bluetooth-owner@vger.kernel.org>
X-Original-To: lists+linux-bluetooth@lfdr.de
Delivered-To: lists+linux-bluetooth@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 34A106D11E8
	for <lists+linux-bluetooth@lfdr.de>; Fri, 31 Mar 2023 00:06:57 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S230303AbjC3WG4 (ORCPT <rfc822;lists+linux-bluetooth@lfdr.de>);
        Thu, 30 Mar 2023 18:06:56 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:41544 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S230307AbjC3WGR (ORCPT
        <rfc822;linux-bluetooth@vger.kernel.org>);
        Thu, 30 Mar 2023 18:06:17 -0400
Received: from relay3-d.mail.gandi.net (relay3-d.mail.gandi.net [217.70.183.195])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id BB313113C2
        for <linux-bluetooth@vger.kernel.org>; Thu, 30 Mar 2023 15:03:23 -0700 (PDT)
Received: (Authenticated sender: hadess@hadess.net)
        by mail.gandi.net (Postfix) with ESMTPSA id D138460003;
        Thu, 30 Mar 2023 22:03:21 +0000 (UTC)
Message-ID: <39877b39f5575cbfc89e567cb082741b47d02654.camel@hadess.net>
Subject: Re: [PATCH] adapter: Use regular discovery for filters which only
 have discoverable set
From:   Bastien Nocera <hadess@hadess.net>
To:     Hans de Goede <hdegoede@redhat.com>,
        linux-bluetooth@vger.kernel.org
Date:   Fri, 31 Mar 2023 00:03:21 +0200
In-Reply-To: <20230330211233.102136-1-hdegoede@redhat.com>
References: <20230330211233.102136-1-hdegoede@redhat.com>
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
User-Agent: Evolution 3.46.4 (3.46.4-1.fc37) 
MIME-Version: 1.0
X-Spam-Status: No, score=-0.7 required=5.0 tests=RCVD_IN_DNSWL_LOW,
        RCVD_IN_MSPIKE_H3,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_PASS
        autolearn=unavailable autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-bluetooth.vger.kernel.org>
X-Mailing-List: linux-bluetooth@vger.kernel.org

VG9wIHBvc3RpbmcgdG8gY29tbWVudCBvbiB0aGUgc3ViamVjdC4gSXQgc2hvdWxkIGhhdmUgIltC
bHVlWiBQQVRDSF0iCmFzIHRoZSBwcmVmaXggc28gdGhhdCB0aGUgdXNlci1zcGFjZSBDSSBydW5z
IG9uIGl0LgoKT24gVGh1LCAyMDIzLTAzLTMwIGF0IDIzOjEyICswMjAwLCBIYW5zIGRlIEdvZWRl
IHdyb3RlOgo+IGRpc2NvdmVyeV9maWx0ZXJfdG9fbWdtdF9jcCgpIGRvZXMgbm90IGFkZAo+IGRp
c2NvdmVyeV9maWx0ZXIuZGlzY292ZXJhYmxlCj4gdG8gdGhlIGNyZWF0ZWQgbWdtdF9jcF9zdGFy
dF9zZXJ2aWNlX2Rpc2NvdmVyeSBzdHJ1Y3QuCj4gCj4gSW5zdGVhZCB1cGRhdGVfZGlzY292ZXJ5
X2ZpbHRlcigpIHNlcHJhdGVseSBjaGVja3MKPiBjbGllbnQtPmRpc2NvdmVyeV9maWx0ZXItPmRp
c2NvdmVyYWJsZSBmb3IgYWxsIGNsaWVudHMuCgoic2VwYXJhdGVseSIuCgo+IFRoaXMgbWVhbnMg
dGhhdCBmb3IgZGlzY292ZXJ5LWZpbHRlcnMgd2hpY2ggb25seSBoYXZlIHRoZQo+IGRpc2NvdmVy
YWJsZQo+IGZsYWcgc2V0LCB0byBwdXQgdGhlIGFkYXB0ZXIgaW4gZGlzY292ZXJhYmxlIG1vZGUg
d2hpbGUgZGlzY292ZXJpbmcsCj4gdGhlIGNyZWF0ZWQgbWdtdF9jcF9zdGFydF9zZXJ2aWNlX2Rp
c2NvdmVyeSBzdHJ1Y3QgaXMgZW1wdHkuCj4gCj4gVGhpcyBlbXB0eSBtZ210X2NwX3N0YXJ0X3Nl
cnZpY2VfZGlzY292ZXJ5IHN0cnVjdCB0aGVuIGdldHMgc2VuZAoKInNlbnQiCgo+IHRvIHRoZSBr
ZXJuZWwgYXMgcGFydCBvZiBhIE1HTVRfT1BfU1RBUlRfU0VSVklDRV9ESVNDT1ZFUlkgbXNnCj4g
Ynkgc3RhcnRfZGlzY292ZXJ5X3RpbWVvdXQoKS4KPiAKPiBUaGlzIHVzZSBvZiBhbiBlbXB0eSBm
aWx0ZXIgd2l0aCBNR01UX09QX1NUQVJUX1NFUlZJQ0VfRElTQ09WRVJZCj4gY2F1c2VzIHNvbWUg
Ymx1ZXRvb3RoIGRldmljZXMgdG8gbm90IGdldCBzZWVuIHdpdGggc29tZSAobW9zdD8pCj4gQnJv
YWRjb20gYmx1ZXRvb3RoIGFkYXB0ZXJzLiBUaGlzIHByb2JsZW0gaGFzIGJlZW4gb2JzZXJ2ZWQg
d2l0aAo+IHRoZSBmb2xsb3dpbmcgQnJvYWRjb20gbW9kZWxzOiBCQ000MzQzQTAsIEJDTTQzNDMw
QTEsIEJDTTQzMzQxQjAgLgo+IAo+IE9uIHRoZXNlIG1vZGVscyB0aGUgZm9sbG93aW5nIDIgZGV2
aWNlcyB3ZXJlIG5vdCBiZWluZyBkaXNjb3ZlcmVkCj4gd2hlbiBzdGFydGluZyBhIHNjYW4gd2l0
aCBhIGZpbHRlciB3aXRoIGp1c3QgZGlzY292ZXJhYmxlIHNldAo+IGluIHRoZSBmaWx0ZXIgKGFz
IGdub21lLWJsdWV0b290aCBkb2VzKToKPiAKPiBEZXZpY2UgMDk6MDI6MDE6MDM6MEY6ODcgKHB1
YmxpYykKPiDCoMKgwqDCoMKgwqDCoMKgTmFtZTogQmx1ZXRvb3RoIDMuMCBLZXlib2FyZAo+IMKg
wqDCoMKgwqDCoMKgwqBBbGlhczogQmx1ZXRvb3RoIDMuMCBLZXlib2FyZAo+IMKgwqDCoMKgwqDC
oMKgwqBDbGFzczogMHgwMDAwMDU0MAo+IMKgwqDCoMKgwqDCoMKgwqBJY29uOiBpbnB1dC1rZXli
b2FyZAo+IMKgwqDCoMKgwqDCoMKgwqBQYWlyZWQ6IHllcwo+IMKgwqDCoMKgwqDCoMKgwqBCb25k
ZWQ6IHllcwo+IMKgwqDCoMKgwqDCoMKgwqBUcnVzdGVkOiB5ZXMKPiDCoMKgwqDCoMKgwqDCoMKg
QmxvY2tlZDogbm8KPiDCoMKgwqDCoMKgwqDCoMKgQ29ubmVjdGVkOiB5ZXMKPiDCoMKgwqDCoMKg
wqDCoMKgV2FrZUFsbG93ZWQ6IHllcwo+IMKgwqDCoMKgwqDCoMKgwqBMZWdhY3lQYWlyaW5nOiB5
ZXMKPiDCoMKgwqDCoMKgwqDCoMKgVVVJRDogU2VydmljZSBEaXNjb3ZlcnkgU2VydmUuLiAoMDAw
MDEwMDAtMDAwMC0xMDAwLTgwMDAtCj4gMDA4MDVmOWIzNGZiKQo+IMKgwqDCoMKgwqDCoMKgwqBV
VUlEOiBIdW1hbiBJbnRlcmZhY2UgRGV2aWNlLi4uICgwMDAwMTEyNC0wMDAwLTEwMDAtODAwMC0K
PiAwMDgwNWY5YjM0ZmIpCj4gwqDCoMKgwqDCoMKgwqDCoFVVSUQ6IFBuUCBJbmZvcm1hdGlvbsKg
wqDCoMKgwqDCoMKgwqDCoMKgICgwMDAwMTIwMC0wMDAwLTEwMDAtODAwMC0KPiAwMDgwNWY5YjM0
ZmIpCj4gwqDCoMKgwqDCoMKgwqDCoE1vZGFsaWFzOiBibHVldG9vdGg6djA1QUNwMDIyQ2QwMTFC
Cj4gCj4gRGV2aWNlIDAwOjYwOkQxOjAwOjAwOjM0IChwdWJsaWMpCj4gwqDCoMKgwqDCoMKgwqDC
oE5hbWU6IEJsdWV0b290aCBNb3VzZQo+IMKgwqDCoMKgwqDCoMKgwqBBbGlhczogQmx1ZXRvb3Ro
IE1vdXNlCj4gwqDCoMKgwqDCoMKgwqDCoENsYXNzOiAweDAwMDAyNTgwCj4gwqDCoMKgwqDCoMKg
wqDCoEljb246IGlucHV0LW1vdXNlCj4gwqDCoMKgwqDCoMKgwqDCoFBhaXJlZDogeWVzCj4gwqDC
oMKgwqDCoMKgwqDCoEJvbmRlZDogeWVzCj4gwqDCoMKgwqDCoMKgwqDCoFRydXN0ZWQ6IHllcwo+
IMKgwqDCoMKgwqDCoMKgwqBCbG9ja2VkOiBubwo+IMKgwqDCoMKgwqDCoMKgwqBDb25uZWN0ZWQ6
IHllcwo+IMKgwqDCoMKgwqDCoMKgwqBXYWtlQWxsb3dlZDogeWVzCj4gwqDCoMKgwqDCoMKgwqDC
oExlZ2FjeVBhaXJpbmc6IG5vCj4gwqDCoMKgwqDCoMKgwqDCoFVVSUQ6IEh1bWFuIEludGVyZmFj
ZSBEZXZpY2UuLi4gKDAwMDAxMTI0LTAwMDAtMTAwMC04MDAwLQo+IDAwODA1ZjliMzRmYikKPiDC
oMKgwqDCoMKgwqDCoMKgVVVJRDogUG5QIEluZm9ybWF0aW9uwqDCoMKgwqDCoMKgwqDCoMKgwqAg
KDAwMDAxMjAwLTAwMDAtMTAwMC04MDAwLQo+IDAwODA1ZjliMzRmYikKPiDCoMKgwqDCoMKgwqDC
oMKgTW9kYWxpYXM6IHVzYjp2MDEwM3AwMjA0ZDAwMUUKPiAKPiBTaW5jZSBzZXR0aW5nIHRoZSBk
aXNjb3ZlcmFibGUgZmxhZyBvbiBhIGZpbHRlciBvbmx5IGlzIGEgd2F5IHRvCj4gYXV0b21hdGlj
YWxseSBwdXQgdGhlIGFkYXB0ZXIgaW4gZGlzY292ZXJhYmxlIG1vZGUgaXRzZWxmIHdoaWxlCj4g
aXQgaXMgZGlzY292ZXJpbmc7IGFuZCBzaW5jZSB0aGlzIGRvZXMgbm90IGFueSBkZXZpY2UgZmls
dGVyaW5nCj4gYXQgYWxsOyBtb2RpZnkgbWVyZ2VfZGlzY292ZXJ5X2ZpbHRlcnMoKSB0byB0cmVh
dCBkaXNjb3Zlcnkgd2l0aAo+IHN1Y2ggZmlsdGVycyBhcyByZWd1bGFyIHVuZmlsdGVyZWQgZGlz
Y292ZXJ5Lgo+IAo+IFRoaXMgcmVzdWx0cyBpbiBzdGFydF9kaXNjb3ZlcnlfdGltZW91dCgpIHN0
YXJ0aW5nIHJlZ3VsYXIKPiBkaXNjb3ZlcnkgdGhyb3VnaCBhIE1HTVRfT1BfU1RBUlRfRElTQ09W
RVJZIG1lc3NhZ2UgYW5kIHRoaXMKPiBmaXhlcyB0aGVzZSAyIGV4YW1wbGUgZGV2aWNlcyBub3Qg
Z2V0dGluZyBkaXNjb3ZlcmVkIGJ5IHRoZQo+IG1lbnRpb25lZCBCcm9hZGNvbSBCVCBhZGFwdGVy
IG1vZGVscy4KPiAKPiBMaW5rOgo+IGh0dHBzOi8vZ2l0bGFiLmdub21lLm9yZy9HTk9NRS9nbm9t
ZS1ibHVldG9vdGgvLS9tZXJnZV9yZXF1ZXN0cy8xNjMKPiAtLS0KPiBOb3RlIHRoZSBzYW1lIGFy
Z3VtZW50IGNhbiBiZSBtYWRlIGZvciB0aGUgcGF0dGVybiBhbmQgZHVwbGljYXRlIHBhcnQKPiBv
Zgo+IHRoZSBmaWx0ZXJzIHdoaWNoIGFsc28gZ2V0IGhhbmRsZWQgb3V0c2lkZSBvZiB0aGUga2Vy
bmVsIGZpbHRlci4KPiBCdXQgSSBwcmVmZXIgdG8ga2VlcCB0aGUgZmlyc3QgcGF0Y2ggc21hbGwg
YW5kIHRhcmdldHRlZCBhdCBzb2x2aW5nCj4gdGhpbmdzCj4gbm90IHdvcmtpbmcgd2l0aCB0aGUg
Z25vbWUtYmx1ZXRvb3RoIGZpbHRlciBzZXR0aW5ncy4KPiAKPiBBbHNvIEknbSBub3QgZmFtaWxp
YXIgZW5vdWdoIHdpdGggdGhlIGNvZGUgdG8gc2F5IHdpdGggY2VydGFpbnR5IHRoYXQKPiBmaWx0
ZXJzIHdpdGgganVzdCBhIHBhdHRlcm4gb3IgdGhlIGR1cGxpY2F0ZSBmbGFnIHNldCAob3IgYQo+
IGNvbWJpbmF0aW9uKQo+IHNob3VsZCBhbHNvIGJlIHRyZWF0ZWQgYXMgdW5maWx0ZXJlZCBkaXNj
b3ZlcnkuCj4gLS0tCj4gwqBzcmMvYWRhcHRlci5jIHwgMTcgKysrKysrKysrKysrKysrKy0KPiDC
oDEgZmlsZSBjaGFuZ2VkLCAxNiBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCj4gCj4gZGlm
ZiAtLWdpdCBhL3NyYy9hZGFwdGVyLmMgYi9zcmMvYWRhcHRlci5jCj4gaW5kZXggNzk0NzE2MGE2
Li5jYzdmODkxZDkgMTAwNjQ0Cj4gLS0tIGEvc3JjL2FkYXB0ZXIuYwo+ICsrKyBiL3NyYy9hZGFw
dGVyLmMKPiBAQCAtMjE5Miw2ICsyMTkyLDcgQEAgc3RhdGljIGludCBtZXJnZV9kaXNjb3Zlcnlf
ZmlsdGVycyhzdHJ1Y3QKPiBidGRfYWRhcHRlciAqYWRhcHRlciwgaW50ICpyc3NpLAo+IMKgwqDC
oMKgwqDCoMKgwqBib29sIGVtcHR5X3V1aWQgPSBmYWxzZTsKPiDCoMKgwqDCoMKgwqDCoMKgYm9v
bCBoYXNfcmVndWxhcl9kaXNjb3ZlcnkgPSBmYWxzZTsKPiDCoMKgwqDCoMKgwqDCoMKgYm9vbCBo
YXNfZmlsdGVyZWRfZGlzY292ZXJ5ID0gZmFsc2U7Cj4gK8KgwqDCoMKgwqDCoMKgdWludDhfdCBh
ZGFwdGVyX3NjYW5fdHlwZSA9IGdldF9zY2FuX3R5cGUoYWRhcHRlcik7Cj4gwqAKPiDCoMKgwqDC
oMKgwqDCoMKgZm9yIChsID0gYWRhcHRlci0+ZGlzY292ZXJ5X2xpc3Q7IGwgIT0gTlVMTDsgbCA9
Cj4gZ19zbGlzdF9uZXh0KGwpKSB7Cj4gwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBz
dHJ1Y3QgZGlzY292ZXJ5X2NsaWVudCAqY2xpZW50ID0gbC0+ZGF0YTsKPiBAQCAtMjIwMiw2ICsy
MjAzLDIwIEBAIHN0YXRpYyBpbnQgbWVyZ2VfZGlzY292ZXJ5X2ZpbHRlcnMoc3RydWN0Cj4gYnRk
X2FkYXB0ZXIgKmFkYXB0ZXIsIGludCAqcnNzaSwKPiDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBjb250aW51ZTsKPiDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoH0KPiDCoAo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAvKgo+ICvC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgKiBEZXRlY3QgZW1wdHkgZmlsdGVyIHdpdGgg
b25seSBkaXNjb3ZlcmFibGUKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgICogKHdo
aWNoIGRvZXMgbm90IHJlcXVpcmUgYSBrZXJuZWwgZmlsdGVyKSBzZXQuCj4gK8KgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoCAqLwo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBp
ZiAoaXRlbS0+dXVpZHMgPT0gTlVMTCAmJgo+ICvCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqAgaXRlbS0+cGF0aGxvc3MgPT0gRElTVEFOQ0VfVkFMX0lOVkFMSUQgJiYKPiArwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGl0ZW0tPnJzc2kgPT0gRElTVEFOQ0Vf
VkFMX0lOVkFMSUQgJiYKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGl0
ZW0tPnR5cGUgPT0gYWRhcHRlcl9zY2FuX3R5cGUgJiYKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgIGl0ZW0tPmR1cGxpY2F0ZSA9PSBmYWxzZSAmJgo+ICvCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgaXRlbS0+cGF0dGVybiA9PSBOVUxMKSB7CgpJIHdv
dWxkIGhhdmUgc3BsaXQgdGhpcyBjaHVua3kgImlmIiBpbnRvIGEgc2VwYXJhdGUgZnVuY3Rpb24s
IGJ1dApvdGhlcndpc2UgdGhlIGxvZ2ljIGxvb2tzIGdvb2QuCgpSZXZpZXdlZC1ieTogQmFzdGll
biBOb2NlcmEgPGhhZGVzc0BoYWRlc3MubmV0PgoKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoGhhc19yZWd1bGFyX2Rpc2NvdmVyeSA9IHRydWU7Cj4gK8Kg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBjb250aW51ZTsKPiAr
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgfQo+ICsKPiDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoGhhc19maWx0ZXJlZF9kaXNjb3ZlcnkgPSB0cnVlOwo+IMKgCj4gwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAqdHJhbnNwb3J0IHw9IGl0ZW0tPnR5cGU7Cj4gQEAg
LTIyNTEsNyArMjI2Niw3IEBAIHN0YXRpYyBpbnQgbWVyZ2VfZGlzY292ZXJ5X2ZpbHRlcnMoc3Ry
dWN0Cj4gYnRkX2FkYXB0ZXIgKmFkYXB0ZXIsIGludCAqcnNzaSwKPiDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoCAqIEl0IHRoZXJlIGlzIGJvdGggcmVndWxhciBhbmQgZmlsdGVyZWQg
c2Nhbgo+IHJ1bm5pbmcsIHRoZW4KPiDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCAq
IGNsZWFyIHdob2xlIGZpdGxlciB0byByZXBvcnQgYWxsIGRldmljZXMuCj4gwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqAgKi8KPiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
KnRyYW5zcG9ydCA9IGdldF9zY2FuX3R5cGUoYWRhcHRlcik7Cj4gK8KgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoCp0cmFuc3BvcnQgPSBhZGFwdGVyX3NjYW5fdHlwZTsKPiDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoCpyc3NpID0gSENJX1JTU0lfSU5WQUxJRDsKPiDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGdfc2xpc3RfZnJlZSgqdXVpZHMpOwo+IMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgKnV1aWRzID0gTlVMTDsKCg==

